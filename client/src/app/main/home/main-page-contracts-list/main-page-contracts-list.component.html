<!-- Public contracts -->
<div class="container-fluid" id="filter-form">
  <div class="row" id="public-contracts-row">
    <div class="col-md-12 public-contracts">
      <h1 class="text-center title">{{ 'datatable.title' | translate }}</h1>
    </div>
  </div>
  <div class="alert alert-info alert-dismissible fade show" role="alert">
    <p>
      <strong>{{ 'datatable.searchContract' | translate }}:</strong> "{{ 'datatable.activityTitle' | translate }}", "{{
      'datatable.name'
      | translate }}", "{{ 'datatable.implementationDeadline' | translate }}"!</p>
    <p>
      <strong>{{ 'datatable.chooseDate' | translate }}: </strong>"{{ 'datatable.publicationDate' | translate }}", "{{
      'datatable.publicationDateOfGivenContract'
      | translate }}", "{{ 'datatable.cancellationNoticeDate' | translate }}", "{{ 'datatable.signingDate' | translate
      }}"!</p>
    <p>
      <strong>{{ 'datatable.value' | translate }}:</strong> "{{ 'datatable.predictedValue' | translate }}", "{{
      'datatable.totalAmountOfContractsIncludingTaxes'
      | translate }}" </p>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="row">
    <div class="col-lg-12 search text-center contracts-filter-form">
      <form action="" class="form-inline form-group">
        <input type="text" (keyup)="onType()" [(ngModel)]="search.string" name="string" class="form-control form-input"
          placeholder="{{ 'datatable.searchContract' | translate }}">
        <select class="form-control form-select" (change)="onChange()" [(ngModel)]="search.directorate"
          name="directorate">
          <option value="">{{ 'visualisations.allYears' | translate }}</option>
          <option *ngFor="let directorate of directorates" value="{{directorate.directorateName}}">
            {{directorate.directorateName}}</option>
        </select>
        <input (input)="onDateInputChange($event)" (ngModelChange)="onDatePick($event)" bsDatepicker
          placeholder="MM/DD/YYYY" [bsConfig]="bsConfig" name="date" id="date" class="form-control form-select"
          [(ngModel)]="search.date">
        <input type="text" (keyup)="onType()" [(ngModel)]="search.value" name="value" class="form-control form-input"
          placeholder="{{ 'datatable.value' | translate }}">
        <select (change)="onChangeYear($event)" class="form-control form-select">
          <option value="any">Te gjitha vitet</option>
          <option *ngFor="let year of years" value="{{year.year}}">{{year.year}}</option>
        </select>
      </form>
    </div>
  </div>
</div>

<div id="table1">
  <ngx-datatable #table class="bootstrap" columnMode="'force'" [rows]="rows" [headerHeight]="'auto'"
    [summaryRow]="false" [summaryPosition]="'bottom'" [footerHeight]="50" [rowHeight]="'auto'" [externalPaging]="true"
    [count]="page.totalElements" [offset]="page.pageNumber" [limit]="page.size" [messages]="messages"
    [scrollbarH]="true" (page)='setPage($event)' [externalSorting]="true" (scroll)="onTableScroll($event)">
    <ngx-datatable-column>
      <ng-template let-column="column" ngx-datatable-header-template>
        <p class="column-header">{{ 'datatable.contractModal' | translate }}</p>
      </ng-template>
      <ng-template let-row="row" ngx-datatable-cell-template>
        <span>
          <a class="view-icon" (click)="viewModal(modalViewContract, $event)" [attr.data-id]="row._id">
            <i class="fa fa-eye" id="view-contract" style="margin-top: 1.5px;cursor: pointer; font-size: 20px"
              aria-hidden="true" [attr.data-id]="row._id"></i>
          </a>
        </span>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="activity-title" prop="activityTitle">
      <ng-template let-column="column" ngx-datatable-header-template>
        <span (click)="sortContracts('activityTitleSlug')">
          <p class="column-header">{{ 'datatable.activityTitle' | translate }}</p>
        </span>
        <div class="sort-icons">
          <span id="sort" class="desc" (click)="sortContracts('activityTitle1')">
            <i class="fa fa-sort" aria-hidden="true"></i>
          </span>
        </div>
      </ng-template>
      <ng-template let-row="row" ngx-datatable-cell-template>
        <p *ngIf="row.releases[0].tender.title == ''">
          -
        </p>
        <p *ngIf="row.releases[0].tender.title != ''">
          {{ row.releases[0].tender.title }}
        </p>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="publication-date" prop="contract.publicationDate">
      <ng-template let-column="column" ngx-datatable-header-template>
        <span (click)="sortContracts('publicationDate')">
          <p class="column-header">{{ 'datatable.publicationDate' | translate }}</p>
        </span>
        <div class="sort-icons">
          <span id="sort" (click)="sortContracts('publicationDate')">
            <i class="fa fa-sort" aria-hidden="true"></i>
          </span>
        </div>
      </ng-template>
      <ng-template let-row="row" ngx-datatable-cell-template>
        <p *ngIf="row.releases[0].tender.date == null">
          -
        </p>
        <p *ngIf="row.releases[0].tender.date != null">
          {{ row.releases[0].tender.date | date: 'dd/MM/yyyy' }}
        </p>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="number-of-companies" prop="noOfCompaniesWhoDownloadedTenderDoc">
      <ng-template let-column="column" ngx-datatable-header-template>
        <span (click)="sortContracts('noOfCompaniesWhoDownloadedTenderDoc')">
          <p class="column-header">{{ 'datatable.noOfCompaniesWhoDownloadedTenderDoc' | translate }}</p>
        </span>
        <div class="sort-icons">
          <span id="sort" (click)="sortContracts('noOfCompaniesWhoDownloadedTenderDoc')">
            <i class="fa fa-sort" aria-hidden="true"></i>
          </span>
        </div>
      </ng-template>
      <ng-template let-row="row" ngx-datatable-cell-template>
        <p *ngIf="row.releases[0].bids.statistics[0].value == null">
          -
        </p>
        <p *ngIf="row.releases[0].bids.statistics[0].value != null">
          {{ row.releases[0].bids.statistics[0].value }}
        </p>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="no-of-companies-who-submited" prop="noOfCompaniesWhoSubmited">
      <ng-template let-column="column" ngx-datatable-header-template>
        <span (click)="sortContracts('noOfCompaniesWhoSubmited')">
          <p class="column-header">{{ 'datatable.noOfCompaniesWhoSubmited' | translate }}</p>
        </span>
        <div class="sort-icons">
          <span id="sort" (click)="sortContracts('noOfCompaniesWhoSubmited')">
            <i class="fa fa-sort" aria-hidden="true"></i>
          </span>
        </div>
      </ng-template>
      <ng-template let-row="row" ngx-datatable-cell-template>
        <p *ngIf="row.releases[0].tender.numberOfTenderers == null">
          -
        </p>
        <p *ngIf="row.releases[0].tender.numberOfTenderers != null">
          {{ row.releases[0].tender.numberOfTenderers }}
        </p>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="publication-date-of-given-contract" prop="contract.publicationDateOfGivenContract">
      <ng-template let-column="column" ngx-datatable-header-template>
        <span (click)="sortContracts('publicationDateOfGivenContract')">
          <p class="column-header">{{ 'datatable.publicationDateOfGivenContract' | translate }}</p>
        </span>
        <div class="sort-icons">
          <span id="sort" (click)="sortContracts('publicationDateOfGivenContract')">
            <i class="fa fa-sort" aria-hidden="true"></i>
          </span>
        </div>
      </ng-template>
      <ng-template let-row="row" ngx-datatable-cell-template>
        <p *ngIf="row.releases[0].awards[0].date == null">
          -
        </p>
        <p *ngIf="row.releases[0].awards[0].date != null">
          {{ row.releases[0].awards[0].date | date: 'dd/MM/yyyy' }}
        </p>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="cancellation-notice-date" prop="cancellationNoticeDate">
      <ng-template let-column="column" ngx-datatable-header-template>
        <span (click)="sortContracts('cancellationNoticeDate')">
          <p class="column-header">{{ 'datatable.cancellationNoticeDate' | translate }}</p>
        </span>
        <div class="sort-icons">
          <span id="sort" (click)="sortContracts('cancellationNoticeDate')">
            <i class="fa fa-sort" aria-hidden="true"></i>
          </span>
        </div>
      </ng-template>
      <ng-template let-row="row" ngx-datatable-cell-template>
        <p *ngIf="row.releases[0].tender.milestones[1].dateMet == null" data-toggle="tooltip"
          title="Data e publikimit të anulimit të njoftimit">
          -
        </p>
        <p *ngIf="row.releases[0].tender.milestones[1].dateMet != null">
          {{ row.releases[0].tender.milestones[1].dateMet | date: 'dd/MM/yyyy' }}
        </p>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="predicted-value" prop="contract.predictedValue">
      <ng-template let-column="column" ngx-datatable-header-template>
        <span (click)="sortContracts('predictedValue')">
          <p class="column-header">{{ 'datatable.predictedValue' | translate }}</p>
        </span>
        <div class="sort-icons">
          <span id="sort" (click)="sortContracts('predictedValue')">
            <i class="fa fa-sort" aria-hidden="true"></i>
          </span>
        </div>
      </ng-template>
      <ng-template let-row="row" ngx-datatable-cell-template>
        <p *ngIf="row.releases[0].planning.budget.amount.amount == ''">
          -
        </p>
        <p *ngIf="row.releases[0].planning.budget.amount.amount != ''">
          {{ row.releases[0].planning.budget.amount.amount }} &euro;
        </p>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="company-name" prop="company.name">
      <ng-template let-column="column" ngx-datatable-header-template>
        <span (click)="sortContracts('companyName')">
          <p class="column-header">{{ 'datatable.name' | translate }}</p>
        </span>
        <div class="sort-icons">
          <span id="sort" (click)="sortContracts('companyName')">
            <i class="fa fa-sort" aria-hidden="true"></i>
          </span>
        </div>
      </ng-template>
      <ng-template let-row="row" ngx-datatable-cell-template>
        <p *ngIf="row.releases[0].tender.tenderers[0].name == ''">
          -
        </p>
        <p *ngIf="row.releases[0].tender.tenderers[0].name != ''">
          {{ row.releases[0].tender.tenderers[0].name }}
        </p>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="signing-date" prop="contract.signingDate">
      <ng-template let-column="column" ngx-datatable-header-template>
        <span (click)="sortContracts('signingDate')">
          <p class="column-header">{{ 'datatable.signingDate' | translate }}</p>
        </span>
        <div class="sort-icons">
          <span id="sort" (click)="sortContracts('signingDate')">
            <i class="fa fa-sort" aria-hidden="true"></i>
          </span>
        </div>
      </ng-template>
      <ng-template let-row="row" ngx-datatable-cell-template>
        <p *ngIf="row.releases[0].contracts[0].period.startDate == null">
          -
        </p>
        <p *ngIf="row.releases[0].contracts[0].period.startDate != null">
          {{ row.releases[0].contracts[0].period.startDate | date: 'dd/MM/yyyy' }}
        </p>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="implementation-deadline-starting-date" prop="contract.implementationDeadline">
      <ng-template let-column="column" ngx-datatable-header-template>
        <span (click)="sortContracts('implementationDeadline')">
          <p class="column-header">{{ 'datatable.implementationDeadline' | translate }}</p>
        </span>
        <div class="sort-icons">
          <span id="sort" (click)="sortContracts('implementationDeadline')">
            <i class="fa fa-sort" aria-hidden="true"></i>
          </span>
        </div>
      </ng-template>
      <ng-template let-row="row" ngx-datatable-cell-template>
        <p *ngIf="row.releases[0].contracts[0].period.durationInDays === ''">
          -
        </p>
        <p *ngIf="row.releases[0].contracts[0].period.durationInDays !== ''">
          {{ row.releases[0].contracts[0].period.durationInDays }}
        </p>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="total-amount-of-contracts-including-taxes"
      prop="contract.totalAmountOfContractsIncludingTaxes">
      <ng-template let-column="column" ngx-datatable-header-template>
        <span (click)="sortContracts('totalAmountOfContractsIncludingTaxes')">
          <p class="column-header">{{ 'datatable.totalAmountOfContractsIncludingTaxes' | translate }}</p>
        </span>
        <div class="sort-icons">
          <span id="sort" (click)="sortContracts('totalAmountOfContractsIncludingTaxes')">
            <i class="fa fa-sort" aria-hidden="true"></i>
          </span>
        </div>
      </ng-template>
      <ng-template let-row="row" ngx-datatable-cell-template>
        <p *ngIf="row.releases[0].tender.value.amount == 0">
          -
        </p>
        <p *ngIf="row.releases[0].tender.value.amount != 0">
          {{ row.releases[0].tender.value.amount }} &euro;
        </p>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="directorates" prop="directorates">
      <ng-template let-column="column" ngx-datatable-header-template>
        <span (click)="sortContracts('directorates')">
          <p class="column-header">{{ 'datatable.directorate' | translate }}</p>
        </span>
        <div class="sort-icons">
          <span id="sort" (click)="sortContracts('directorates')">
            <i class="fa fa-sort" aria-hidden="true"></i>
          </span>
        </div>
      </ng-template>
      <ng-template let-row="row" ngx-datatable-cell-template>
        <p *ngIf="row.releases[0].parties[1].name == null || row.releases[0].parties[1].name == ''">
          -
        </p>
        <p *ngIf="row.releases[0].parties[1].name != null && row.releases[0].parties[1].name !== ''">
          {{ row.releases[0].parties[1].name }}
        </p>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="documents" prop="documents">
      <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
        <span>
          <p class="column-header">{{ 'datatable.tenderDoc' | translate }}</p>
        </span>
      </ng-template>
      <ng-template let-row="row" ngx-datatable-cell-template>
        <p
          *ngIf="row.releases[0].tender.documents == null || row.releases[0].tender.documents.length === 0; else showDocs">
          -
        </p>
        <ng-template #showDocs>
          <p>
            <span *ngFor="let document of row.releases[0].tender.documents">
              <a class="view-icon" href="./documents/{{document.title}}" target="_blank">
                <i class="fa fa-file-text-o" style="margin-top: 1.5px; cursor: pointer; font-size: 20px"
                  aria-hidden="true"></i>
              </a>
            </span>
          </p>
        </ng-template>

      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column>
      <ng-template let-column="column" ngx-datatable-header-template>
        <p class="column-header">{{ 'datatable.contractDoc' | translate }}</p>
      </ng-template>
      <ng-template let-row="row" ngx-datatable-cell-template>
        <span>
          <div *ngIf="!row.releases[0].contracts[0].documents[0] || !row.releases[0].contracts[0].documents[0].title">
            <p>-</p>
          </div>
          <div
            *ngIf="row.releases[0].contracts[0].documents[0] && row.releases[0].contracts[0].documents[0].title !== ''">
            <a class="view-icon" [attr.data-id]="row._id"
              href="/uploads/{{row.releases[0].contracts[0].documents[0].title}}" target="_blank">
              <i class="fa fa-file-text-o" style="margin-top: 1.5px; font-size: 20px" aria-hidden="true"></i>
            </a>
          </div>
        </span>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column>
      <ng-template let-column="column" ngx-datatable-header-template>
        <p class="column-header">{{ 'datatable.jsonDoc' | translate }}</p>
      </ng-template>
      <ng-template let-row="row" ngx-datatable-cell-template>
        <span>
          <a class="view-icon" [attr.data-id]="row.releases[0].ocid" href="/contracts/json/{{row.releases[0].ocid}}"
            target="_blank">
            <i class="fa fa-file-code-o" style="margin-top: 1.5px; font-size: 20px" aria-hidden="true"></i>
          </a>
        </span>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-footer>
      <ng-template ngx-datatable-footer-template let-rowCount="rowCount" let-pageSize="pageSize"
        let-selectedCount="selectedCount" let-curPage="curPage" let-offset="offset">
        <div style="padding: 5px 10px;width: 50%;">
          {{ 'datatable.contracts' | translate }} {{rowCount}} | {{ 'datatable.displayedContracts' | translate }}
          {{pageSize}} | {{
          'datatable.page' | translate }} {{curPage}}
        </div>
        <datatable-pager [pagerLeftArrowIcon]="'datatable-icon-left'" [pagerRightArrowIcon]="'datatable-icon-right'"
          [pagerPreviousIcon]="'datatable-icon-prev'" [pagerNextIcon]="'datatable-icon-skip'" [page]="curPage"
          [size]="pageSize" [count]="rowCount" [hidden]="!((rowCount / pageSize) > 1)"
          (change)="table.onFooterPage($event)">
        </datatable-pager>
      </ng-template>
    </ngx-datatable-footer>
  </ngx-datatable>
</div>

<!-- Modal for viewing a contract -->
<ng-template #modalViewContract>
  <div id="view-contract-modal">
    <div class="modal-header view-modal-header">
      <h4 class="modal-title">{{ contract.releases[0].tender.title }}</h4>
      <button type="button" class="close" (click)="modalRef.hide()" aria-hidden="true">&times;</button>
    </div>
    <form action="" id="view-contract-form">
      <div class="modal-body">
        <div class="row">
          <div class="col-md-3">
            <button class="nav-contract description" (click)="navChange($event)"
              [ngClass]="{'active': navValue === 'Përshkrim' || navValue === 'Opis' || navValue === 'Description'}">{{
              'individualContract.description' | translate }}</button>
            <button class="nav-contract" (click)="navChange($event)"
              [ngClass]="{'active': navValue === 'Palët' || navValue === 'Stranke' || navValue === 'Parties'}">{{
              'individualContract.parties' | translate }}</button>
            <button class="nav-contract" (click)="navChange($event)"
              [ngClass]="{'active': navValue === 'Planning' || navValue === 'Planifikimi' || navValue === 'Planiranje'}">{{
              'individualContract.planning' | translate }}</button>
            <button class="nav-contract" (click)="navChange($event)"
              [ngClass]="{'active': navValue === 'Tender' || navValue === 'Tenderi'}">{{
              'individualContract.tender' | translate }}</button>
            <button class="nav-contract" (click)="navChange($event)"
              [ngClass]="{'active': navValue === 'Bids' || navValue === 'Ofertat' || navValue === 'Ponude'}">{{
              'individualContract.bids' | translate }}</button>
            <button class="nav-contract" (click)="navChange($event)"
              [ngClass]="{'active': navValue === 'Awards' || navValue === 'Davanje' || navValue === 'Dhënia'}">{{
              'individualContract.awards' | translate }}</button>
            <button class="nav-contract" (click)="navChange($event)"
              [ngClass]="{'active': navValue === 'Contract' || navValue === 'Kontrata' || navValue === 'Ugovori'}">{{
              'individualContract.contract' | translate }}</button>
            <button class="nav-contract implementation" (click)="navChange($event)"
              [ngClass]="{'active': navValue === 'Implementation' || navValue === 'Izvršenje' || navValue === 'Implementimi'}">{{
              'individualContract.implementation' | translate }}</button>
          </div>
          <div class="col-md-9">
            <ng-template [ngIf]="navValue === 'Përshkrim' || navValue === 'Opis' || navValue === 'Description'">
              <table class="table table-bordered" id="details-table">
                <tr>
                  <th class="description-header">{{ 'individualContract.details' | translate }}</th>
                </tr>
                <tr>
                  <td>
                    <b>OCID: </b> {{ contract.releases[0].ocid }}
                  </td>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.date' | translate }}: </b> {{ contract.releases[0].date | date:
                    'dd/MM/yyyy' }}
                  </td>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.language' | translate }}: </b> {{ contract.releases[0].language }}
                  </td>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.tags' | translate }}: </b> {{ contract.releases[0].tag }}
                  </td>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.initiationType' | translate }}: </b> {{
                    contract.releases[0].initiationType }}
                  </td>
                </tr>
              </table>
            </ng-template>
            <ng-template [ngIf]="navValue === 'Palët' || navValue === 'Stranke' || navValue === 'Parties'">
              <h4 class="table-title">{{ contract.releases[0].parties[1].name }}</h4>
              <table class="table table-bordered">
                <tr>
                  <th class="description-header">{{ 'individualContract.party' | translate }}</th>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.roles' | translate }}: </b> {{ contract.releases[0].parties[1].roles }}
                  </td>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.address' | translate }}: </b> {{
                    contract.releases[0].parties[1].address.region }}, {{
                    contract.releases[0].parties[1].address.postalCode }}, {{
                    contract.releases[0].parties[1].address.countryName }}
                  </td>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.contactPoint' | translate }}: </b> {{
                    contract.releases[0].parties[1].contactPoint.name }}
                  </td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ contract.releases[0].parties[0].name }}</h4>
              <table class="table table-bordered">
                <tr>
                  <th class="description-header">{{ 'individualContract.party' | translate }}</th>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.roles' | translate }}: </b> {{ contract.releases[0].parties[0].roles }}
                  </td>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.address' | translate }}: </b> {{
                    contract.releases[0].parties[0].address.region }}
                  </td>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.details' | translate }}: </b>
                    <span *ngIf="contract.releases[0].parties[0].details.local === true">{{ 'individualContract.local'
                      | translate }}</span>
                    <span *ngIf="contract.releases[0].parties[0].details.local === false">{{
                      'individualContract.notLocal' | translate }}</span>
                  </td>
                </tr>
              </table>
            </ng-template>
            <ng-template [ngIf]="navValue === 'Planning' || navValue === 'Planifikimi' || navValue === 'Planiranje'">
              <table class="table table-bordered">
                <tr>
                  <th class="description-header">{{ 'individualContract.budget' | translate }}</th>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.budgetAmount' | translate }}: </b> {{
                    contract.releases[0].planning.budget.amount.amount }}
                    {{contract.releases[0].planning.budget.amount.currency }}
                  </td>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.budgetDescription' | translate }}: </b> {{
                    contract.releases[0].planning.budget.description }}
                  </td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.milestones' | translate }}</h4>
              <table class="table table-bordered">
                <tr class="description-header">
                  <th>{{ 'individualContract.title' | translate }}</th>
                  <th>{{ 'individualContract.date' | translate }}</th>
                  <th>{{ 'individualContract.status' | translate }}</th>
                  <th>{{ 'individualContract.code' | translate }}</th>
                  <th>{{ 'individualContract.type' | translate }}</th>
                </tr>
                <tr *ngFor="let milestone of contract.releases[0].planning.milestones">
                  <td *ngIf="milestone.dateMet">{{ milestone.title }}</td>
                  <td *ngIf="milestone.dateMet">{{ milestone.dateMet | date: 'dd/MM/yyyy' }}</td>
                  <td *ngIf="milestone.dateMet">{{ milestone.status }}</td>
                  <td *ngIf="milestone.dateMet">{{ milestone.code }}</td>
                  <td *ngIf="milestone.dateMet">{{ milestone.type }}</td>
                </tr>
              </table>
            </ng-template>
            <ng-template [ngIf]="navValue === 'Tender' || navValue === 'Tenderi'">
              <table class="table table-bordered">
                <tr>
                  <th class="description-header">{{ 'individualContract.details' | translate }}</th>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.status' | translate }}: </b> {{ contract.releases[0].tender.status }}
                  </td>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.criteria' | translate }}: </b> {{
                    contract.releases[0].tender.awardCriteria}}
                  </td>
                </tr>
                <tr>
                  <td>
                    <b>Id: </b> {{ contract.releases[0].tender.id }}
                  </td>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.value' | translate }}: </b>
                    <div *ngIf="contract.releases[0].tender.value.amount">
                      {{ contract.releases[0].tender.value.amount
                        }} {{ contract.releases[0].tender.value.currency
                        }}
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.keyDates' | translate }}: </b>
                    <br>
                    {{ 'individualContract.tenderStart' | translate }}: {{
                    contract.releases[0].tender.tenderPeriod.startDate | date: 'dd/MM/yyyy' }}
                    <br>
                    {{ 'individualContract.awardStart' | translate }}: {{
                    contract.releases[0].tender.awardPeriod.startDate | date: 'dd/MM/yyyy' }} - {{
                    'individualContract.awardEnd' | translate }}: {{ contract.releases[0].tender.awardPeriod.endDate |
                    date: 'dd/MM/yyyy' }}
                    <br>
                    {{ 'individualContract.contractStart' | translate }}: {{
                    contract.releases[0].tender.contractPeriod.startDate | date: 'dd/MM/yyyy' }} -
                    {{ 'individualContract.contractEnd' | translate }}: {{
                    contract.releases[0].tender.contractPeriod.endDate | date: 'dd/MM/yyyy' }}
                  </td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.complaints' | translate }}</h4>
              <br>
              <p>{{ 'individualContract.complaintsAuthorityTender' | translate }}</p>
              <table class="table table-bordered">
                <tr>
                  <th class="description-header">{{ 'individualContract.complaint' | translate }}</th>
                </tr>
                <tr>
                  <td>
                    <span *ngIf="contract.releases[0].tender.hasEnquiries === true">{{ 'individualContract.positive' |
                      translate }}</span>
                    <span *ngIf="contract.releases[0].tender.hasEnquiries === false">{{ 'individualContract.negative' |
                      translate }}</span>
                  </td>
                </tr>
              </table>
              <p>{{ 'individualContract.complaintOshpTender' | translate }}</p>
              <table class="table table-bordered">
                <tr>
                  <th class="description-header">{{ 'individualContract.complaint' | translate }}</th>
                </tr>
                <tr>
                  <td>
                    <span *ngIf="contract.releases[0].tender.hasComplaints === true">{{ 'individualContract.positive' |
                      translate }}</span>
                    <span *ngIf="contract.releases[0].tender.hasComplaints === false">{{ 'individualContract.negative'
                      | translate }}</span>
                  </td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.procurementMethod' | translate }}</h4>
              <table class="table table-bordered">
                <tr>
                  <th class="description-header">{{ 'individualContract.method' | translate }}</th>
                </tr>
                <tr>
                  <td>
                    {{ contract.releases[0].tender.procurementMethod }}
                  </td>
                </tr>
              </table>
              <table class="table table-bordered">
                <tr>
                  <th class="description-header">{{ 'individualContract.methodRationale' | translate }}</th>
                </tr>
                <tr>
                  <td>
                    <span *ngIf="contract.releases[0].tender.procurementMethodRationale === 'Open procedure'">
                      <b>openProcedure:</b>
                      {{ 'individualContract.openProcedure' | translate }}</span>
                    <span
                      *ngIf="contract.releases[0].tender.procurementMethodRationale === 'Negociated procedure after award notice'">
                      <b>negociatedProcedureAfterAwardNotice:</b> {{
                      'individualContract.negociatedProcedureAfterAwardNotice' | translate }}</span>
                    <span *ngIf="contract.releases[0].tender.procurementMethodRationale === 'Limited procedure'">
                      <b>limitedProcedure:</b>
                      {{ 'individualContract.limitedProcedure' | translate }}</span>
                    <span
                      *ngIf="contract.releases[0].tender.procurementMethodRationale === 'Negociated procedure without award notice'">
                      <b>negociatedProcedureWithoutAwardNotice:</b> {{
                      'individualContract.negociatedProcedureWithoutAwardNotice' | translate }}</span>
                    <span *ngIf="contract.releases[0].tender.procurementMethodRationale === 'Design contest'">
                      <b>designContest:</b>
                      {{ 'individualContract.designContest' | translate }}</span>
                    <span *ngIf="contract.releases[0].tender.procurementMethodRationale === 'Minimal value procedure'">
                      <b>minimalValueProcedure:</b> {{ 'individualContract.minimalValueProcedure' | translate }}</span>
                    <span
                      *ngIf="contract.releases[0].tender.procurementMethodRationale === 'Quotation value procedure'">
                      <b>quotationValueProcedure:</b>
                      {{ 'individualContract.quotationValueProcedure' | translate }}</span>
                  </td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.procurementCategories' | translate }}</h4>
              <table class="table table-bordered">
                <tr>
                  <th class="description-header">{{ 'individualContract.category' | translate }}</th>
                </tr>
                <tr>
                  <td>
                    {{ contract.releases[0].tender.mainProcurementCategory }}
                  </td>
                </tr>
              </table>
              <table class="table table-bordered">
                <tr>
                  <th class="description-header">{{ 'individualContract.categoryRationale' | translate }}</th>
                </tr>
                <tr>
                  <td>
                    <span *ngIf="contract.releases[0].tender.additionalProcurementCategories === 'goods'"> <b>goods:</b>
                      {{ 'individualContract.goods' | translate }}</span>
                    <span *ngIf="contract.releases[0].tender.additionalProcurementCategories === 'works'">
                      <b>works:</b> {{ 'individualContract.works' | translate }}</span>
                    <span *ngIf="contract.releases[0].tender.additionalProcurementCategories === 'services'">
                      <b>services:</b>
                      {{ 'individualContract.services' | translate }}</span>
                    <span *ngIf="contract.releases[0].tender.additionalProcurementCategories === 'consultingServices'">
                      <b>consultingServices:</b> {{ 'individualContract.consultingServices' | translate }}</span>
                    <span *ngIf="contract.releases[0].tender.additionalProcurementCategories === 'concessionWorks'">
                      <b>concessionWorks:</b>
                      {{ 'individualContract.concessionWorks' | translate }}</span>
                    <span *ngIf="contract.releases[0].tender.additionalProcurementCategories === 'designContest'">
                      <b>designContest:</b> {{ 'individualContract.designContest' | translate }}</span>
                    <span *ngIf="contract.releases[0].tender.additionalProcurementCategories === 'immovableProperty'">
                      <b>immovableProperty:</b> {{ 'individualContract.immovableProperty' | translate }}</span>
                  </td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.awardCriteria' | translate }}</h4>
              <table class="table table-bordered">
                <tr>
                  <th class="description-header">{{ 'individualContract.criteria' | translate }}</th>
                </tr>
                <tr>
                  <td>
                    <span *ngIf="contract.releases[0].tender.awardCriteria === 'priceOnly'"> <b>{{
                        contract.releases[0].tender.awardCriteria }}:</b>
                      {{ 'individualContract.priceOnly' | translate }}</span>
                    <span *ngIf="contract.releases[0].tender.awardCriteria === 'costOnly'"> <b>{{
                        contract.releases[0].tender.awardCriteria }}:</b>
                      {{ 'individualContract.costOnly' | translate }}</span>
                    <span *ngIf="contract.releases[0].tender.awardCriteria === 'ratedCriteria'"> <b>{{
                        contract.releases[0].tender.awardCriteria }}:</b>
                      {{ 'individualContract.ratedCriteria' | translate }}</span>
                  </td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.items' | translate }}</h4>
              <table class="table table-bordered">
                <tr class="description-header">
                  <th>ID</th>
                  <th>{{ 'individualContract.description' | translate }}</th>
                  <th>{{ 'individualContract.classification' | translate }}</th>
                  <th>{{ 'individualContract.quantity' | translate }}</th>
                </tr>
                <tr *ngFor="let item of contract.releases[0].tender.items">
                  <td *ngIf="item.quantity">{{ item.id }}</td>
                  <td *ngIf="item.quantity">{{ item.description }}</td>
                  <td *ngIf="item.quantity">{{ item.classification.id }}</td>
                  <td *ngIf="item.quantity">{{ item.quantity }}</td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.documents' | translate }}</h4>
              <table class="table table-bordered">
                <tr class="description-header">
                  <th>{{ 'individualContract.title' | translate }}</th>
                  <th>{{ 'individualContract.type' | translate }}</th>
                  <th>{{ 'individualContract.format' | translate }}</th>
                  <th>{{ 'individualContract.language' | translate }}</th>
                </tr>
                <tr *ngFor="let document of contract.releases[0].tender.documents">
                  <td><a href="./documents/{{document.title}}" target="_blank">{{ document.title }}</a></td>
                  <td>{{ document.documentType }}</td>
                  <td>{{ document.format }}</td>
                  <td>{{ document.language }}</td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.tenderers' | translate }}</h4>
              <table class="table table-bordered">
                <tr class="description-header">
                  <th>{{ 'individualContract.details' | translate }}</th>
                </tr>
                <tr>
                  <td><b>{{ 'individualContract.numberOfTenderers' | translate }}: </b> {{
                    contract.releases[0].tender.numberOfTenderers }}</td>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.name' | translate }}:</b>
                    <span *ngFor="let tenderer of contract.releases[0].tender.tenderers">
                      <br>
                      {{ tenderer.name }}
                    </span>
                  </td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.milestones' | translate }}</h4>
              <table class="table table-bordered">
                <tr class="description-header">
                  <th>{{ 'individualContract.title' | translate }}</th>
                  <th>{{ 'individualContract.status' | translate }}</th>
                  <th>{{ 'individualContract.code' | translate }}</th>
                  <th>{{ 'individualContract.type' | translate }}</th>
                  <th>{{ 'individualContract.date' | translate }}</th>
                </tr>
                <tr *ngFor="let milestone of contract.releases[0].tender.milestones">
                  <td *ngIf="milestone.dateMet">{{ milestone.title }}</td>
                  <td *ngIf="milestone.dateMet">{{ milestone.status }}</td>
                  <td *ngIf="milestone.dateMet">{{ milestone.code }}</td>
                  <td *ngIf="milestone.dateMet">{{ milestone.type }}</td>
                  <td *ngIf="milestone.dateMet">{{ milestone.dateMet | date: 'dd/MM/yyyy' }}</td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.estimatedValue' | translate }}</h4>
              <table class="table table-bordered">
                <tr class="description-header">
                  <th>{{ 'individualContract.procurementValue' | translate }}</th>
                </tr>
                <tr>
                  <td>{{ contract.releases[0].tender.estimatedSizeOfProcurementValue.estimatedValue }}</td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.applicationProcedure' | translate }}</h4>
              <table class="table table-bordered">
                <tr class="description-header">
                  <th>{{ 'individualContract.type' | translate }}</th>
                </tr>
                <tr>
                  <td>
                    <span *ngIf="contract.releases[0].tender.procedure.isAcceleratedProcedure === true">{{
                      'individualContract.normalDeadline' | translate }}</span>
                    <span *ngIf="contract.releases[0].tender.procedure.isAcceleratedProcedure === false">{{
                      'individualContract.shortenedDeadline' | translate }}</span>
                  </td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.lots' | translate }}</h4>
              <table class="table table-bordered">
                <tr class="description-header">
                  <th>{{ 'individualContract.value' | translate }}</th>
                  <th>{{ 'individualContract.deadline' | translate }}</th>
                </tr>
                <tr *ngFor="let lot of contract.releases[0].tender.lots">
                  <td *ngIf="lot.value.amount">{{ lot.value.amount }} {{ lot.value.currency }}</td>
                  <td *ngIf="lot.value.amount">{{ lot.description }}</td>
                </tr>
              </table>
            </ng-template>
            <ng-template [ngIf]="navValue === 'Bids' || navValue === 'Ofertat' || navValue === 'Ponude'">
              <h4 class="table-title">{{ 'individualContract.bidStatistics' | translate }}</h4>
              <table class="table table-bordered">
                <tr class="description-header">
                  <th>ID</th>
                  <th>{{ 'individualContract.notes' | translate }}</th>
                  <th>{{ 'individualContract.measure' | translate }}</th>
                  <th>{{ 'individualContract.value' | translate }}</th>
                </tr>
                <tr *ngFor="let bid of contract.releases[0].bids.statistics">
                  <td *ngIf="bid.value">{{ bid.id }}</td>
                  <td *ngIf="bid.value">{{ bid.notes }}</td>
                  <td *ngIf="bid.value">{{ bid.measure }}</td>
                  <td *ngIf="bid.value">{{ bid.value }} EUR</td>
                </tr>
              </table>
            </ng-template>
            <ng-template [ngIf]="navValue === 'Awards' || navValue === 'Davanje' || navValue === 'Dhënia'">
              <table class="table table-bordered">
                <tr class="description-header">
                  <th>{{ 'individualContract.details' | translate }}</th>
                </tr>
                <tr>
                  <td><b>{{ 'individualContract.date' | translate }}: </b> {{ contract.releases[0].awards[0].date |
                    date: 'dd/MM/yyyy' }}</td>
                </tr>
                <tr>
                  <td><b>{{ 'individualContract.contractPeriod' | translate }}: </b>
                    <br>
                    {{ 'individualContract.start' | translate }}: {{
                    contract.releases[0].awards[0].contractPeriod.startDate | date: 'dd/MM/yyyy' }} - {{
                    'individualContract.end' | translate }}: {{
                    contract.releases[0].awards[0].contractPeriod.endDate | date: 'dd/MM/yyyy' }}
                  </td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.complaints' | translate }}</h4>
              <p>{{ 'individualContract.complaintsAuthorityAward' | translate }}</p>
              <table class="table table-bordered">
                <tr>
                  <th class="description-header">{{ 'individualContract.complaint' | translate }}</th>
                </tr>
                <tr>
                  <td>
                    <span *ngIf="contract.releases[0].awards[0].enquiryType === 'positive'">{{
                      'individualContract.positive' | translate }}</span>
                    <span *ngIf="contract.releases[0].awards[0].enquiryType === 'negative'">{{
                      'individualContract.negative' | translate }}</span>
                    <span *ngIf="contract.releases[0].awards[0].enquiryType === 'none'">{{ 'individualContract.none' |
                      translate }}</span>
                  </td>
                </tr>
              </table>
              <p>{{ 'individualContract.complaintOshpAward' | translate }}</p>
              <table class="table table-bordered">
                <tr>
                  <th class="description-header">{{ 'individualContract.complaint' | translate }}</th>
                </tr>
                <tr>
                  <td>
                    <span *ngIf="contract.releases[0].awards[0].complaintType === 'positive'">{{
                      'individualContract.positive' | translate }}</span>
                    <span *ngIf="contract.releases[0].awards[0].complaintType === 'negative'">{{
                      'individualContract.negative' | translate }}</span>
                    <span *ngIf="contract.releases[0].awards[0].complaintType === 'none'">{{ 'individualContract.none'
                      | translate }}</span>
                  </td>
                </tr>
              </table>
            </ng-template>
            <ng-template [ngIf]="navValue === 'Contract' || navValue === 'Kontrata' || navValue === 'Ugovori'">
              <table class="table table-bordered">
                <tr>
                  <th class="description-header">{{ 'individualContract.details' | translate }}</th>
                </tr>
                <tr>
                  <td>
                    <b>{{ 'individualContract.status' | translate }}: </b> {{ contract.releases[0].contracts[0].status
                    }}
                  </td>
                </tr>
                <tr>
                  <td><b>{{ 'individualContract.contractPeriod' | translate }}: </b>
                    <br>
                    {{ 'individualContract.start' | translate }}: {{ contract.releases[0].contracts[0].period.startDate
                    | date: 'dd/MM/yyyy' }} - {{ 'individualContract.end' | translate }}: {{
                    contract.releases[0].contracts[0].period.endDate | date: 'dd/MM/yyyy' }}
                  </td>
                </tr>
                <tr>
                  <td><b>{{ 'individualContract.value' | translate }}: </b>
                    <div
                      *ngIf="contract.releases[0].contracts[0].value.amount && contract.releases[0].contracts[0].value.amount !== 0">
                      {{
                        contract.releases[0].contracts[0].value.amount }} {{
                        contract.releases[0].contracts[0].value.currency }}
                    </div>
                  </td>
                </tr>
                <tr>
                  <td><b>{{ 'individualContract.dateSigned' | translate }}: </b> {{
                    contract.releases[0].contracts[0].dateSigned | date: 'dd/MM/yyyy' }}</td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.documents' | translate }}</h4>
              <table class="table table-bordered">
                <tr class="description-header">
                  <th>{{ 'individualContract.title' | translate }}</th>
                  <th>{{ 'individualContract.type' | translate }}</th>
                  <th>{{ 'individualContract.format' | translate }}</th>
                  <th>{{ 'individualContract.language' | translate }}</th>
                </tr>
                <tr *ngFor="let document of contract.releases[0].contracts[0].documents">
                  <td><a href="./uploads/{{document.title}}" target="_blank">{{ document.title }}</a></td>
                  <td>{{ document.documentType }}</td>
                  <td>{{ document.format }}</td>
                  <td>{{ document.language }}</td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.amendments' | translate }}</h4>
              <table class="table table-bordered">
                <tr class="description-header">
                  <th>{{ 'individualContract.date' | translate }}</th>
                  <th>{{ 'individualContract.value' | translate }}</th>
                </tr>
                <tr *ngFor="let amendment of contract.releases[0].contracts[0].amendments">
                  <td *ngIf="amendment.date">{{ amendment.date | date: 'dd/MM/yyyy' }}</td>
                  <td *ngIf="amendment.description && amendment.description !== '0'">{{ amendment.description }} EUR
                  </td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.deductionAmount' | translate }}</h4>
              <table class="table table-bordered">
                <tr class="description-header">
                  <th>{{ 'individualContract.amount' | translate }}</th>
                </tr>
                <tr>
                  <td *ngIf="contract.releases[0].contracts[0].deductionAmountFromContract.value.amount">
                    {{ contract.releases[0].contracts[0].deductionAmountFromContract.value.amount }} {{
                    contract.releases[0].contracts[0].deductionAmountFromContract.value.currency }}</td>
                </tr>
              </table>
            </ng-template>
            <ng-template
              [ngIf]="navValue === 'Implementation' || navValue === 'Izvršenje' || navValue === 'Implementimi'">
              <h4 class="table-title">{{ 'individualContract.transactions' | translate }}</h4>
              <table class="table table-bordered">
                <tr class="description-header">
                  <th>{{ 'individualContract.expectedTransactions' | translate }}</th>
                </tr>
                <tr>
                  <td>{{ contract.releases[0].contracts[0].expectedNumberOfTransactions}}</td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.transactionDetails' | translate }}</h4>
              <table class="table table-bordered">
                <tr class="description-header">
                  <th>{{ 'individualContract.date' | translate }}</th>
                  <th>{{ 'individualContract.payerName' | translate }}</th>
                  <th>{{ 'individualContract.payeeName' | translate }}</th>
                  <th>{{ 'individualContract.value' | translate }}</th>
                </tr>
                <tr *ngFor="let transaction of contract.releases[0].contracts[0].implementation.transactions">
                  <td *ngIf="transaction.value.amount">{{ transaction.date | date: 'dd/MM/yyyy' }}</td>
                  <td *ngIf="transaction.value.amount">{{ transaction.payer.name }}</td>
                  <td *ngIf="transaction.value.amount">{{ transaction.payee.name }}</td>
                  <td *ngIf="transaction.value.amount">{{ transaction.value.amount }} {{ transaction.value.currency }}
                  </td>
                </tr>
              </table>
              <hr>
              <h4 class="table-title">{{ 'individualContract.paidValue' | translate }}</h4>
              <table class="table table-bordered">
                <tr class="description-header">
                  <th>{{ 'individualContract.value' | translate }}</th>
                  <th>{{ 'individualContract.details' | translate }}</th>
                </tr>
                <tr *ngIf="contract.releases[0].contracts[0].implementation.finalValue.amount">
                  <td>{{ contract.releases[0].contracts[0].implementation.finalValue.amount }} {{
                    contract.releases[0].contracts[0].implementation.finalValue.currency }}</td>
                  <td>{{ 'individualContract.paidValueDetails' | translate }}</td>
                </tr>
              </table>
            </ng-template>
          </div>
        </div>
      </div>
    </form>
  </div>
</ng-template>
